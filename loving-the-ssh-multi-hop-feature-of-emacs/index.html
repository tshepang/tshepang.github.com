<!DOCTYPE html>
<html lang="en">
    <head>
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta http-equiv="content-type" content="text/html; charset=utf-8">

      <!-- Enable responsiveness on mobile devices-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

      <title>Tshepang logs</title>

      <!-- CSS -->
      <link rel="stylesheet" href="http:&#x2F;&#x2F;tshepang.net&#x2F;print.css" media="print">
      <link rel="stylesheet" href="http:&#x2F;&#x2F;tshepang.net&#x2F;poole.css">
      <link rel="stylesheet" href="http:&#x2F;&#x2F;tshepang.net&#x2F;hyde.css">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

      

      
      
    </head>

    <body class=" ">
        
            <div class="sidebar">
                <div class="container sidebar-sticky">
                    <div class="sidebar-about">
                        
                            <a href="http:&#x2F;&#x2F;tshepang.net"><h1>Tshepang logs</h1></a>
                            
                        
                    </div>

                    <ul class="sidebar-nav">
                        
                        
                        <li><a href="https:&#x2F;&#x2F;twitter.com&#x2F;tshepang_dev">twitter</a></li>
                        
                        <li><a href="https:&#x2F;&#x2F;github.com&#x2F;tshepang">github</a></li>
                        
                        
                    </ul>
                </div>
            </div>
        

        <div class="content container">
            
<div class="post">
  <h1 class="post-title">loving the SSH multi-hop feature of Emacs</h1>
  <span class="post-date">2014-09-04</span>
  <p>I'm at home and want to access some system at work. I cannot access
this system directly, so will have to use a VPN or sshfs, but I don't
know how to set VPN up and sshfs feels rather clunky (I first have to
have some directory I'm going to mount the thing, and have to remember
the command line syntax). With Emacs, I run the following command:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">C-x C-f /ssh:work|ssh:10.0.0.107|ssh:10.0.0.148:~/some/files/
</span></pre>
<p>What happens there is I ask Emacs to run <code>find-file</code>, which opens its
file manager, <strong>Dired</strong>. It first accesses the server at work, then my
work desktop (<code>10.0.0.107</code>), and then some machine (<code>10.0.0.148</code>) which
I normally access via my work desktop (it got SSH keys). Finally, I'm
then presented with the view of the files in <code>~/some/files/</code> in that
machine, which I can work on (view, edit, save) like any local file. I
was surprised such a feature exists, thinking I'd have to do ugly
things like port forwarding. I do use the single hop a lot (if that's
even the right name):</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">C-x C-f /ssh:work:~/some/files/
</span></pre>
<p>Shortcut for that is:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">C-x C-f /work:~/some/files/
</span></pre>
<p><strong>sidenotes</strong>:</p>
<ul>
<li>
<p>The shortcut doesn't work with multi-hop</p>
</li>
<li>
<p>I love the fact that Emacs accepts SSH settings, where for example,
instead of specifying the whole <a href="mailto:username@host">username@host</a>, it accepts the
aliases in <code>~/.ssh/config</code>, such that I only have to run:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">ssh work
</span></pre>
<p>instead of:</p>
<pre style="background-color:#2b303b">
<span style="background-color:#2b303b;color:#c0c5ce;">ssh tshepang@hostname
</span></pre></li>
</ul>

</div>

        </div>

    </body>

</html>
